<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.togogo.blog.mapper.TBlogMapper">

    <!--按日期查询博客并统计数量-->
    <select id="findBlogDateAndCount" resultType="net.togogo.blog.entity.TBlog">
        SELECT DATE_FORMAT(releaseDate,'%Y年%m月') releaseDateStr ,COUNT(1) blogCount
        FROM t_blog
        GROUP BY DATE_FORMAT(releaseDate,'%Y年%m月')
    </select>

    <!--分页查询博客信息-->
    <select id="findBlogByPage" resultType="net.togogo.blog.entity.TBlog">

        SELECT * FROM t_blog
        <where>
            <if test="blog.keyWord !=null and blog.keyWord != ''">
                and b.keyWord like('%'#{blog.keyWord}'%')
            </if>
            <if test="blog.typeId != null">
                and b.typeId = #{blog.typeId}
            </if>
            <if test="blog.releaseDateStr != null and blog.releaseDateStr != ''">
                and DATE_FORMART(b.releaseDate,'%Y年%m月') =#{blog.releaseDateStr}
            </if>
        </where>

        ORDER BY releaseDate DESC

    </select>
</mapper>
